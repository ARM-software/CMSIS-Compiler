<!-- HTML header for doxygen 1.9.6-->
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en-US">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>CMSIS-Compiler Support: I/O Retarget example project</title>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<script type="text/javascript" src="tabs.js"></script>
<script type="text/javascript" src="footer.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
  $(document).ready(function() { init_search(); });
/* @license-end */
</script>
<script type="text/javascript" src="darkmode_toggle.js"></script>
<link href="extra_stylesheet.css" rel="stylesheet" type="text/css"/>
<link href="extra_navtree.css" rel="stylesheet" type="text/css"/>
<link href="extra_search.css" rel="stylesheet" type="text/css"/>
<link href="extra_tabs.css" rel="stylesheet" type="text/css"/>
<link href="version.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../version.js"></script>
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 55px;">
  <td id="projectlogo" style="padding: 1.5em;"><a href="https://www.keil.arm.com/cmsis" target="_blank"><img alt="Logo" src="cmsis_logo_white_small.png"/</a></td>
  <td style="padding-left: 1em; padding-bottom: 1em;padding-top: 1em;">
   <div id="projectname">CMSIS-Compiler Support
   &#160;<span id="projectnumber"><script type="text/javascript">
     <!--
     writeHeader.call(this);
     writeVersionDropdown.call(this, "CMSIS-Compiler Support");
     //-->
    </script>
   </span>
   </div>
   <div id="projectbrief">Standard C Library File, I/O and OS Retargeting</div>
  </td>
   <td>        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <span id="MSearchSelect"                onmouseover="return searchBox.OnSearchSelectShow()"                onmouseout="return searchBox.OnSearchSelectHide()">&#160;</span>
          <input type="text" id="MSearchField" value="" placeholder="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.svg" alt=""/></a>
          </span>
        </div>
</td>
  <!--END !PROJECT_NAME-->
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<div id="CMSISnav" class="tabs1">
  <ul class="tablist">
    <script type="text/javascript">
      writeComponentTabs.call(this);
    </script>
  </ul>
</div>
<!-- Generated by Doxygen 1.9.6 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "search/",'.html');
/* @license-end */
</script>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(document).ready(function(){initNavTree('md__home_runner_work_CMSIS_Compiler_CMSIS_Compiler_example_README.html',''); initResizable(); });
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<div id="MSearchResults">
<div class="SRPage">
<div id="SRIndex">
<div id="SRResults"></div>
<div class="SRStatus" id="Loading">Loading...</div>
<div class="SRStatus" id="Searching">Searching...</div>
<div class="SRStatus" id="NoMatches">No Matches</div>
</div>
</div>
</div>
</div>

<div><div class="header">
  <div class="headertitle"><div class="title">I/O Retarget example project </div></div>
</div><!--header-->
<div class="contents">
<div class="textblock"><p>This project prints "Hello World" and a counter value via the UART output. It is configured for Arm Virtual Hardware, but other target hardware that provides a CMSIS Driver:USART can be easily added.</p>
<h1><a class="anchor" id="autotoc_md1"></a>
Prerequisites</h1>
<h2><a class="anchor" id="autotoc_md2"></a>
Tools</h2>
<ul>
<li><a href="https://github.com/Open-CMSIS-Pack/devtools/releases">CMSIS-Toolbox 2.10.0</a> or higher</li>
<li><a href="https://developer.arm.com/downloads/view/ACOMPE">Arm Compiler for Embedded</a>, or</li>
<li><a href="https://developer.arm.com/downloads/-/arm-gnu-toolchain-downloads">GCC Compiler for Arm bare-metal</a> or</li>
<li><a href="https://github.com/ARM-software/LLVM-embedded-toolchain-for-Arm">Clang Compiler</a> or</li>
<li><a href="https://www.iar.com/embedded-development-tools">IAR Build Tools for Arm</a></li>
<li><a href="https://developer.arm.com/Tools%20and%20Software/Arm%20Virtual%20Hardware">Arm Virtual Hardware</a> for local execution</li>
</ul>
<h2><a class="anchor" id="autotoc_md3"></a>
Packs</h2>
<ul>
<li>Required packs are listed in the file <code>retarget.csolution.yml</code></li>
</ul>
<h1><a class="anchor" id="autotoc_md4"></a>
Project Structure</h1>
<p>The project is generated using the <a href="https://open-cmsis-pack.github.io/cmsis-toolbox/">CMSIS-Toolbox</a> and is defined in <a href="https://open-cmsis-pack.github.io/cmsis-toolbox/YML-Input-Format/"><code>csolution</code></a> format:</p>
<ul>
<li><code>retarget.csolution.yml</code> lists the required packs and defines the hardware target and build-types (along with the compiler).</li>
<li><code>retarget.cproject.yml</code> defines the source files and the software components.</li>
</ul>
<h1><a class="anchor" id="autotoc_md5"></a>
Build project in VS Code using Arm Keil Studio Pack extensions</h1>
<blockquote class="doxtable">
<p>&zwj;- See <a href="https://mdk-packs.github.io/vscode-cmsis-solution-docs/index.html">Arm Keil Studio for VS Code Extensions User Guide</a> for more information about using the Keil Studio extensions.</p><ul>
<li>Search for <a href="https://marketplace.visualstudio.com/items?itemName=Arm.keil-studio-pack">Arm Keil Studio Pack</a> in the Visual Studio Marketplace to download the extensions. </li>
</ul>
</blockquote>
<p>When the project is opened in VS Code with Arm Keil Studio Extensions installed one must first ensure that the build tools are configured. The <code>Arm Tools Environment Manager</code> should handle this automatically and create <code>vcpkg-configuration.json</code> with all the necessary tools listed. Right-click anywhere in the workspace and select "Configure Arm Tools Environment" to modify tools configuration. See <a href="https://marketplace.visualstudio.com/items?itemName=Arm.environment-manager">Arm Tools Environment Manager Overview</a> for available functionality.</p>
<p>To build a project using Keil Studio extensions open <a href="https://mdk-packs.github.io/vscode-cmsis-solution-docs/userinterface.html">CMSIS view</a>, open "Manage Solution Settings" view and verify that "Active Target", "Active Projects" and "Build Type" are selected. Since there is only one option in each category they should all be automatically selected.</p>
<p>You can execute the build by <a href="https://mdk-packs.github.io/vscode-cmsis-solution-docs/build.html">selecting "Build"</a> from the CMSIS view.</p>
<h1><a class="anchor" id="autotoc_md6"></a>
Build Project from the Command Line</h1>
<p><a href="https://open-cmsis-pack.github.io/cmsis-toolbox/">CMSIS-Toolbox</a> provides <a href="https://open-cmsis-pack.github.io/cmsis-toolbox/build-tools/">cbuild</a> command-line tool that builds <code>csolution</code> projects.</p>
<p>The <code>retarget.csolution.yml</code> solution files defines <code>Debug</code> build-type and <code>VHT_CM3</code> target-type. To build this configuration using Arm Compiler 6 toolchain execute the following command:</p>
<div class="fragment"><div class="line">cbuild retarget.csolution.yml --toolchain AC6 --packs --context retarget.Debug+VHT_CM3</div>
</div><!-- fragment --><blockquote class="doxtable">
<p>&zwj;<b>Note</b></p>
<ul>
<li>During the build process required packs may be downloaded (<code>--pack</code> flag). </li>
</ul>
</blockquote>
<p>By default the project does not specify the toolchain and one can build the project by specifying the AC6, GCC, CLANG or IAR toolchain.</p>
<h1><a class="anchor" id="autotoc_md7"></a>
Execute Project</h1>
<p>The project is configured for execution on Arm Virtual Hardware which removes the requirement for a physical hardware board.</p>
<p>To execute application image on Arm Virtual Hardware use below command: </p><div class="fragment"><div class="line">FVP_MPS2_Cortex-M3 -f fvp-config.txt out/retarget/VHT_CM3/Debug/retarget.axf</div>
</div><!-- fragment --> <blockquote class="doxtable">
<p>&zwj;<b>Note</b></p><ul>
<li>For GCC and CLANG, the application image file has extension <code>.elf</code> and extension <code>.out</code> for IAR. </li>
</ul>
</blockquote>
<p>This command will execute the simulation model and in the default terminal window you should see the following output: </p><div class="fragment"><div class="line">Starting ...</div>
<div class="line">Hello World 1</div>
<div class="line">Hello World 2</div>
<div class="line">Hello World 3</div>
<div class="line">Hello World 4</div>
<div class="line">Hello World 5</div>
<div class="line">Hello World 6</div>
<div class="line">Hello World 7</div>
<div class="line">Hello World 8</div>
<div class="line">Hello World 9</div>
<div class="line">Hello World 10</div>
<div class="line"> </div>
<div class="line">Finished</div>
</div><!-- fragment --><p> The simulation model will automatically terminate after the above output. </p>
</div></div><!-- contents -->
</div><!-- PageDoc -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="footer">
      <script type="text/javascript">
        <!--
        writeFooter.call(this);
        //-->
      </script> 
    </li>
  </ul>
</div>
</body>
</html>
