<!-- HTML header for doxygen 1.9.2-->
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>CMSIS-Compiler Support: Low-Level I/O Retarget</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<script type="text/javascript" src="footer.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
  $(document).ready(function() { init_search(); });
/* @license-end */
</script>
<link href="extra_stylesheet.css" rel="stylesheet" type="text/css"/>
<link href="version.css" rel="stylesheet" type="text/css" />
<script type="text/javascript" src="../version.js"></script>
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 55px;">
  <td id="projectlogo" style="padding: 1.5em;"><img alt="Logo" src="cmsis_logo_white_small.png"/></td>
  <td style="padding-left: 1em; padding-bottom: 1em;padding-top: 1em;">
   <div id="projectname">CMSIS-Compiler Support
   &#160;<span id="projectnumber"><script type="text/javascript">
     <!--
     writeHeader.call(this);
     writeVersionDropdown(this);
     //-->
    </script>
   </span>
   </div>
   <div id="projectbrief">Standard C Library File, I/O and OS Retargeting</div>
  </td>
  <!--END !PROJECT_NAME-->
   <td>        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.svg"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.svg" alt=""/></a>
          </span>
        </div>
</td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.2 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "search",'Search','.html');
/* @license-end */
</script>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(document).ready(function(){initNavTree('rt_io.html',''); initResizable(); });
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div><div class="header">
  <div class="headertitle"><div class="title">Low-Level I/O Retarget </div></div>
</div><!--header-->
<div class="contents">
<div class="textblock"><p ><b>CMSIS-Compiler</b> splits low-level I/O retargeting into <b>standard I/O stream</b> related components and <b>file stream</b> related components.</p>
<p >The low-level I/O retarget decision tree is below: </p><div class="image">
<img src="retarget_low_level_io.png" alt=""/>
<div class="caption">
Low-Level I/O Retarget Decision Tree</div></div>
<p >Low-Level I/O retargeting implementation checks whether the incoming stream is a standard stream (i.e. stderr, stdin, stdout) or a file system related stream and redirects incoming request to the appropriate software component. Chapter <a class="el" href="rt_io.html#rt_io_components">I/O Components</a> explains these software components in detail.</p>
<h1><a class="anchor" id="rt_io_components"></a>
I/O Components</h1>
<p ><b>CMSIS-Compiler:I/O</b> software component can retarget the input/output functions to the following channels:</p>
<table class="markdownTable">
<tr class="markdownTableHead">
<th class="markdownTableHeadNone">Component   </th><th class="markdownTableHeadNone">Description    </th></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone"><b>File</b>   </td><td class="markdownTableBodyNone">Channel for all file stream related operations.    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone"><b>STDERR</b>   </td><td class="markdownTableBodyNone">Standard error stream of the application to output diagnostic messages.    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone"><b>STDIN</b>   </td><td class="markdownTableBodyNone">Standard input stream going into the application (<code>scanf</code> etc.).    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone"><b>STDOUT</b>   </td><td class="markdownTableBodyNone">Standard output stream of the application (<code>printf</code> etc.).    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone"><b>TTY</b>   </td><td class="markdownTableBodyNone">Teletypewriter, which is the last resort for error output.   </td></tr>
</table>
<dl class="section note"><dt>Note</dt><dd><b>TTY</b> is only available for Arm Compiler toolchain.</dd></dl>
<p>Most retargeting channels have various <a class="el" href="rt_io.html#rt_io_variants">I/O Retarget Variants</a>.</p>
<h2><a class="anchor" id="rt_io_variants"></a>
I/O Retarget Variants</h2>
<p >The variant selection allows you to change the target hardware interface of the I/O channel.</p>
<h3><a class="anchor" id="rt_io_file_variants"></a>
I/O:File Variants</h3>
<div class="image">
<img src="retarget_io_file.png" alt=""/>
<div class="caption">
I/O:File component variants</div></div>
<p >The following variants are available: </p><table class="markdownTable">
<tr class="markdownTableHead">
<th class="markdownTableHeadNone">Variant   </th><th class="markdownTableHeadNone">Description    </th></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone"><b>File</b> <b>Interface</b>   </td><td class="markdownTableBodyNone">Use the <a class="el" href="group__fs__interface__api.html">File Interface</a> API for file related operations.    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone"><b>Breakpoint</b>   </td><td class="markdownTableBodyNone">When the I/O channel is used, the application stops with <a href="https://developer.arm.com/documentation/100073/latest/The-Arm-C-and-C---Libraries/Support-for-building-an-application-with-the-C-library/Using-the-C-and-C---libraries-with-an-application-in-a-semihosting-environment?lang=en" target="_blank">BKPT</a> instruction. No additional code is required.   </td></tr>
</table>
<h3><a class="anchor" id="rt_io_std_variants"></a>
I/O:STDERR/STDIN/STDOUT Variants</h3>
<div class="image">
<img src="retarget_io_std.png" alt=""/>
<div class="caption">
I/O:STDERR/STDIN/STDOUT component variants</div></div>
<p >The following variants are available: </p><table class="markdownTable">
<tr class="markdownTableHead">
<th class="markdownTableHeadNone">Variant   </th><th class="markdownTableHeadNone">Description    </th></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone"><b>Breakpoint</b>   </td><td class="markdownTableBodyNone">When the I/O channel is used, the application stops with <a href="https://developer.arm.com/documentation/100073/latest/The-Arm-C-and-C---Libraries/Support-for-building-an-application-with-the-C-library/Using-the-C-and-C---libraries-with-an-application-in-a-semihosting-environment?lang=en" target="_blank">BKPT</a> instruction. No additional code is required.    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone"><b>ITM</b>   </td><td class="markdownTableBodyNone">Use <a href="https://developer.arm.com/documentation/ddi0314/h/Instrumentation-Trace-Macrocell?lang=en" target="_blank">Instrumentation Trace Macrocell (ITM)</a> for I/O communication via the debugger (only available for Cortex-M3/M4/M7/M33/M55/M85 processors).<br  />
 Usually, data is shown in a dedicated window.<br  />
 No additional code is required to output or input data through the ITM channel. However, you have to configure the ITM channel for tracing.    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone"><b>User</b>   </td><td class="markdownTableBodyNone">Retarget I/O functions to a user defined interface (such as <a class="el" href="rt_io.html#uct_usart">USART</a> or <a class="el" href="rt_io.html#uct_template">application specific</a>).<br  />
See <a class="el" href="rt_io.html#variant_User">I/O Retarget Variant "User"</a> for further details.    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone"><b>EVR</b>   </td><td class="markdownTableBodyNone">STDOUT can also be redirected using the <a href="https://arm-software.github.io/CMSIS-View/main/evr.html" target="_blank">Event Recorder</a> (especially interesting for targets without ITM (such as Cortex-M0/M0+/M23)).   </td></tr>
</table>
<dl class="section note"><dt>Note</dt><dd></dd></dl>
<ul>
<li>Depending on the selected variant, certain <code>#defines</code> are set in the header file <b>RTE_Components.h</b> that enable the appropriate code sections in the retarget interface implementation file.</li>
<li>Retargeting <b>STDOUT</b> using the <em>EVR</em> variant is available for all Cortex-M based devices.</li>
<li>The <a href="https://developer.arm.com/documentation/100073/latest/The-Arm-C-Micro-library?lang=en" target="_blank">microlib</a> of Arm Compiler C run-time library interfaces to the hardware via low-level functions. It implements a reduced set of high-level functions and therefore does not implement system I/O functions. Thus, in case of using the microlib, you cannot redefine the system I/O functions. Using any of the features of the Arm Compiler component provides the <a href="https://developer.arm.com/documentation/101754/latest/armasm-Legacy-Assembler-Reference/armasm-Directives-Reference/ASSERT-directive?lang=en" target="_blank">assert</a> facility for microlib.</li>
</ul>
<h2><a class="anchor" id="variant_User"></a>
I/O Retarget Variant "User"</h2>
<p >The CMSIS-Compiler:I/O component variant <b>User</b> provides code templates that help you to implement the functionality.</p>
<p >In µVision, you can import the templates into a project using the context menu <b>Add</b> <b>New</b> <b>Item</b> <b>to</b> <b>Group</b> from the Project window. Depending on your selection, you get templates that support retargeting via display, USART, or keyboard. Also, a template for a custom implementation is available.</p>
<div class="image">
<img src="retarget_add_template.png" alt=""/>
<div class="caption">
Retargeting Code Templates</div></div>
<h3><a class="anchor" id="uct_usart"></a>
Input/Output via USART</h3>
<p >You may use a <a href="https://arm-software.github.io/CMSIS_5/develop/Driver/html/group__usart__interface__gr.html" target="_blank">CMSIS-Driver USART</a> or write your own output routines. The following user code templates are available:</p>
<table class="markdownTable">
<tr class="markdownTableHead">
<th class="markdownTableHeadNone">Component   </th><th class="markdownTableHeadNone">Name   </th><th class="markdownTableHeadNone">File Name    </th></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">I/O:STDOUT   </td><td class="markdownTableBodyNone">STDOUT via USART   </td><td class="markdownTableBodyNone"><a class="el" href="stdout_USART_c.html">stdout_USART.c</a>    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">I/O:STDIN   </td><td class="markdownTableBodyNone">STDIN via USART   </td><td class="markdownTableBodyNone"><a class="el" href="stdin_USART_c.html">stdin_USART.c</a>    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">I/O:STERR   </td><td class="markdownTableBodyNone">STDERR via USART   </td><td class="markdownTableBodyNone"><a class="el" href="stderr_USART_c.html">stderr_USART.c</a>   </td></tr>
</table>
<dl class="section note"><dt>Note</dt><dd>To have the full flexibility for retargeting different channels to different target hardware, each USART user code template contains a function to initialize the USART. When using the same hardware for multiple channels, the initialization functions need to be merged in one single function. Call this function during the initialization of the device's peripherals.</dd></dl>
<h3><a class="anchor" id="uct_template"></a>
Input/Output via Template</h3>
<p >Use these templates for custom interfaces that are not mentioned above. The following user code templates are available:</p>
<table class="markdownTable">
<tr class="markdownTableHead">
<th class="markdownTableHeadNone">Component   </th><th class="markdownTableHeadNone">Name   </th><th class="markdownTableHeadNone">File Name    </th></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">I/O:STDOUT   </td><td class="markdownTableBodyNone">STDOUT User template   </td><td class="markdownTableBodyNone"><a class="el" href="stdout_user_c.html">stdout_user.c</a>    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">I/O:STDIN   </td><td class="markdownTableBodyNone">STDIN User template   </td><td class="markdownTableBodyNone"><a class="el" href="stdin_user_c.html">stdin_user.c</a>    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">I/O:STERR   </td><td class="markdownTableBodyNone">STDERR User template   </td><td class="markdownTableBodyNone"><a class="el" href="stderr_user_c.html">stderr_user.c</a>    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">I/O:TTY   </td><td class="markdownTableBodyNone">TTY User template   </td><td class="markdownTableBodyNone"><a class="el" href="tty_user_c.html">tty_user.c</a>   </td></tr>
</table>
<h1><a class="anchor" id="rt_file_interface"></a>
File Interface Components</h1>
<p ><b>CMSIS-Compiler:File Interface</b> software component provides generic shim layer interface between the C library and an arbitrary file system implementation.</p>
<p >Standard C library functions interact with files in a same manner as with standard I/O streams and offer the same retargeting interface. The existing interface is split to enable component interchangeability and <a class="el" href="group__fs__interface__api.html">File Interface</a> API is used to enable quick file system retargeting.</p>
<p >Default component is as follows:</p>
<table class="markdownTable">
<tr class="markdownTableHead">
<th class="markdownTableHeadNone">Component   </th><th class="markdownTableHeadNone">Description    </th></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone"><b>Custom</b>   </td><td class="markdownTableBodyNone">Placeholder for custom <a class="el" href="group__fs__interface__api.html">File Interface</a> implementation   </td></tr>
</table>
<p ><b>Custom</b> component is available to enable access to <a class="el" href="group__fs__interface__api.html">File Interface</a> API header file when application provides an custom implementation. Custom implementation is typically needed when file system components do not provide its own implementation. To help you implement the functionality the File Interface:Custom component also provides the <a class="el" href="retarget_fs_c.html">code template</a>.</p>
<dl class="section note"><dt>Note</dt><dd>File Interface component is enabled when <b>I/O:File</b> variant <b>File Interface</b> is used.</dd></dl>
<p><br  />
 </p>
</div></div><!-- contents -->
</div><!-- PageDoc -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="footer">
      <script type="text/javascript">
        <!--
        writeFooter.call(this);
        //-->
      </script> 
    </li>
  </ul>
</div>
</body>
</html>
